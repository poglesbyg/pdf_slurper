<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>PDF Slurper</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 0.5rem; }
    th { background: #f5f5f5; text-align: left; }
    .actions a, .actions button { margin-right: .5rem; }
  </style>
  <script>
    async function deleteSubmission(id) {
      if (!confirm('Delete submission ' + id + '?')) return;
      const res = await fetch('/submission/' + id + '/delete', { method: 'POST' });
      if (res.ok) location.reload();
      else alert('Delete failed');
    }
  </script>
  </head>
<body>
  <h1>PDF Slurper</h1>

  <h2>Upload PDF</h2>
  <form action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept="application/pdf" required>
    <button type="submit">Slurp</button>
  </form>

  <h2>Submissions</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Created</th>
        <th>Title</th>
        <th>File</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in submissions %}
      <tr>
        <td><a href="/submission/{{ s.id }}">{{ s.id }}</a></td>
        <td>{{ s.created_at }}</td>
        <td>{{ s.title }}</td>
        <td>{{ s.source_file }}</td>
        <td class="actions">
          <a href="/submission/{{ s.id }}/json" target="_blank">JSON</a>
          <a href="/submission/{{ s.id }}/csv" target="_blank">CSV</a>
          <button onclick="deleteSubmission('{{ s.id }}')">Delete</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</body>
</html>


